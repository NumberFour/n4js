<!DOCTYPE HTML>
<html>
<head>

  <!-- ************* Meta ************* -->
  <title>Testing · Features · N4JS Language and IDE</title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <!-- eclipse -->


  <!-- ************* Styles ************* -->
  <link rel="stylesheet" type="text/css" href="../styles/eclipse.min.5f975d04.css">

  <!-- ****************** Scripts ****************** -->
  <script type="text/javascript" src="../scripts/scripts-legacy.js"></script>
</head>

<body>
  <header class="Grid"></header>

  <div class="Main">
    <article class="Article--noGrid">

<!-- ======================================================================= -->
<h1>Testing</h1>
<!-- ======================================================================= -->

<p class="Introduction">Test Driven Development (TDD) is one of the key techniques to write large systems with maintainable code. The more tests you write, the more confident you can be that your software works as expected and the more comfortable you feel when your refactoring the code, because the tests will tell you if you break something. The N4JS language, the N4 IDE and the built-in test execution runtime (Mangelhaft) were designed and developed to support TDD as good as possible.</p>

<h2>Built-In Test Support</h2>
<p>
From the language perspective, there are annotations that can be used to declare and configure the test suites. Mangelhaft is an <a href="https://en.wikipedia.org/wiki/XUnit">xUnit-like</a> framework that provides an engine that executes the tests and reports back to the IDE while running the test suites. The IDE is responsible for indicating the actual test results received from Mangelhaft to the user. For creating a simple test suite, one requires an N4JS project with a test type source container, a test class in the test type source container and at least one method declared in the test class with the <code>@Test</code> annotation. This is described in more detail in the <a href="../userguide/index.html">user guide</a>. Besides the test execution and reporting engine support, Mangelhaft provides various utility classes that could come handy when test assertions or preconditions have to be used in the test suites or when negative tests are required.
</p>

<div class="Example"><pre name="code" class="n4js:nocontrols:nogutter">import { Assert } from 'n4/mangel/assert/Assert';
import { Precondition } from 'n4/mangel/precondition/Precondition';

export public class FooTest {

    @Test
    public notEquals() {
        Assert.notEqual(36, 'foo');
    }

    @Test
    public iAmSuperstitious() {
        var today = new Date();

        // Skip running the test on each 13th Friday.
        var skipTestToday = this.is13thFriday(today);
        Precondition.isFalse(skipTestToday);

        // Rest of the test logic.
    }

    private is13thFriday(date: Date): boolean {
        …
    }
}
</pre></div>

<h2>N4JS Language Support</h2>

<p>
    <a href="http://junit.org/">Junit-like</a> annotations are are available to configure the test suits, such as:
    <ul>
        <li><code>@Test</code> - the annotated method will be percepted as a test case when configuring and running the test suite.</li>
        <li><code>@Ignore</code> - the annotated method will be percepted as a test case when configuring the test suite, but the marked case will be be executed as a part of the suite execution.</li>
        <li><code>@Fixme</code> - the annotated method will be percepted as a test case when configuring and running the test suite but the assertion logic will be negated.</li>
    </ul>
</p>

<p>
    Test classes can be created in the test container of any arbitrary project. With this approach, the production code can be separated from the test code but both production and test code will be still contained in the same N4JS project.
    Another implementation is that of a test-project type implementation whereby one can completely separate the business logic form the test code. This is done literally using two separate projects, one for the production and one for the test code. Aside from the code separation, the major advantage of using a test-project is that the default access visibility restrictions can be overruled. That means, project visible classes and interfaces and their non visible members and methods can be called, hence tested from the test-projects while those will be still not visible from production code. In a nutshell, one can easily test different aspects of the application without breaking the encapsulation.
</p>

<h2>N4 IDE Support</h2>

<p>
    In the N4 IDE, the Test Results view provides an informative overview of all executed and running test suites in a tree structure. Tests can be executed via the context menu's <strong>Run As</strong> &gt; <strong>Test in Node.js</strong> item directly from the editor or from the Project Explorer view. It is possible to execute all tests form a particular project as well as one single, fine-grained test case from a particular test class.
</p>

<div class="Image"><a href="fig/testResultsView.png"><img src="fig/testResultsView.png" alt="Test Results" /></a></div>

<p>
  Additional features:
</p>
<ul>
    <li>Navigate to test method.</li>
    <li>Showing stack trace for failed tests.</li>
    <li>Quick-test method overview in a popup window.</li>
    <li>Test suite history.</li>
    <li>Re-run previous test suite.</li>
</ul>



    </article>


  </div>
  <footer class="Grid"></footer>
  <script>
    dp.SyntaxHighlighter.HighlightAll('code');
  </script>

</body>
</html>
